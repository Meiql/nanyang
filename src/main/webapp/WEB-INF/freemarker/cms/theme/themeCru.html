<#ftl output_format="HTML" auto_esc=true>
<@h.commonHead title="鍚庡彴绠＄悊绯荤粺" keywords="寮�婧�,姘镐箙鍏嶈垂" description="springrain寮�婧愮郴缁熺鐞嗗悗鍙�"/>

<script src="${ctx}/js/validform/validform.min.js"></script>
<link rel="stylesheet" href="${ctx}/js/validform/validform.css" media="all">
<script>
	var _active;
	var _themeType;
	 jQuery(function(){
		 _active="${(returnDatas.data.active)!''}";
		 _themeType="${(returnDatas.data.themeType)!''}";
		 jQuery("#active").val(_active);
		 jQuery("#themeType").val(_themeType);
		 /*
		 init_valid(_before,_after)
		 @_before:鎻愪氦琛ㄥ崟鍓嶏紝璋冪敤 鐨勫嚱鏁�   鍙互涓虹┖锛屼竴鑸湁validform澶勭悊涓嶄簡锛岀嫭鑷繘琛屽鐞嗘椂浣跨敤
		 @_after:淇濆瓨鎴愬姛鍚庯紝璋冪敤鐨勫嚱鏁�  鍙互涓虹┖锛屼竴鑸负瀵瑰簲鐨勫垪琛ㄩ〉闈�
		 */
		 springrain.initValid(null,function(){window.location.href="${ctx}/system/theme/list?springraintoken="+springraintoken});
	 });
	 function add(){
			//debugger;
			jQuery("#addTbody").parents("table").removeClass("off");
			var _html=["<tr>",
							"<td><input type='text'  name='name' placeholder='妯℃澘鍚嶇О' class='layui-input'></td>",
							"<td><input type='text'  name='ftlfile' placeholder='妯℃澘璺緞' class='layui-input'></td>",
							"<td><select name='modelType'><option value>妯℃澘绫诲瀷</option><option value='1'>鍓嶅彴涓婚〉</option><option value='10'>鍓嶅彴鏂囩珷鍒楄〃椤�</option><option value='11'>鍓嶅彴鏂囩珷鍒楄〃DOM椤�</option><option value='4'>绔欓暱鍚庡彴涓婚〉</option><option value='40'>绔欓暱鍚庡彴鏂囩珷鍒楄〃椤�</option><option value='40'>绔欓暱鍚庡彴鏂囩珷鍒楄〃椤�</option><option value='41'>绔欓暱鍚庡彴鏂囩珷缂栬緫椤�</option><option value='42'>绔欓暱鍚庡彴鏂囩珷鏌ョ湅椤�</option></select></td>",
							"<td><select name='themeType'><option value>骞冲彴绫诲瀷</option><option value='1'>PC</option><option value='2'>鎵嬫満</option><option value='3'>PC+鎵嬫満</option></select></td>",
							"<td><a onclick='del(this)' class='layui-btn layui-btn-danger layui-btn-mini ajax-delete'>鍒犻櫎</a></td>",
						"</tr>"].join('');
			var _html=jQuery(_html);
			jQuery("#addTbody").append(_html);
			form.render();
			jQuery(_html).find("input[name='managerOrgNames']").trigger("click");
			
	}
</script>
</head>
<body>
	<div class="layui-layout layui-layout-admin">
		<@h.naviHeader /><@h.leftMenu />
		<!-- 涓讳綋鍐呭寮�濮� -->
			<div class="layui-tab layui-tab-brief">
				<ul class="layui-tab-title site-demo-title">
		            <li class="layui-this">
		            </li>
		             <li style="float:right;">
				        <button type="button" onclick="history.go(-1)" class="layui-btn layui-btn-small" style="margin-top:8px;"><i class="layui-icon layui-icon-specil">&#xe603;</i>杩斿洖</button>
		             </li>
	       		</ul>
				
				<div class="layui-body layui-tab-content site-demo-body">
					<div class="layui-tab-item layui-show">
							<div class="layui-main">
						          <div id="LAY_preview" class="layui-my-form">
						          				<header class="larry-personal-tit">
													<span>娣诲姞涓婚琛�</span>
												</header>
												<div class="larry-personal-body clearfix changepwd">
													<form id="validForm" class="layui-form <!--  -->"  method="post" action="${ctx}/system/theme/update">
																<input type="hidden" id="id" name="id" value="${(returnDatas.data.id)!''}"/>	
																	<#if returnDatas.data??>
																	<div class="layui-form-item col-lg-6">
																		<label class="layui-form-label">浣跨敤娆℃暟*</label>
																		<div class="layui-inline col-lg-5">  
																			<#--<input type="text" name="usecount" id="usecount" datatype="*" nullmsg="涓嶈兘涓虹┖" errormsg="涓嶈兘涓虹┖锛�" autocomplete="off" class="layui-input" value="${(returnDatas.data.usecount)!''}">-->
																			<input type="text"  class="layui-input" style="background:#d3d3d3;" readonly value="${(returnDatas.data.usecount)!''}">
																		</div>
																		<div class="layui-inline valid-info"></div>
																	</div>
																	</#if>
																	<div class="layui-form-item col-lg-6">
																		<label class="layui-form-label">鍚嶇О*</label>
																		<div class="layui-inline col-lg-5">  
																			<input type="text" name="name" id="name" datatype="*" nullmsg="涓嶈兘涓虹┖" errormsg="涓嶈兘涓虹┖锛�" autocomplete="off" class="layui-input" value="${(returnDatas.data.name)!''}">
																		</div>
																		<div class="layui-inline valid-info"></div>
																	</div>
																	<div class="layui-form-item col-lg-6">
																		<label class="layui-form-label">妯℃澘鏍圭洰褰�*</label>
																		<div class="layui-inline col-lg-5">  
																			<input type="text" name="rootDir" id="rootDir" datatype="*" nullmsg="涓嶈兘涓虹┖" errormsg="涓嶈兘涓虹┖锛�" autocomplete="off" class="layui-input" value="${(returnDatas.data.rootDir)!''}">
																		</div>
																		<div class="layui-inline valid-info"></div>
																	</div>
																	<div class="layui-form-item col-lg-6">
																		<label class="layui-form-label">妯℃澘绫诲瀷*</label>
																		<div class="layui-inline col-lg-5"> 
																			<select name="themeType" id="themeType" datatype="*" nullmsg="涓嶈兘涓虹┖" errormsg="涓嶈兘涓虹┖锛�" >
																				<option value>璇烽�夋嫨妯℃澘绫诲瀷</option>
																				<option value="1">PC</option>
																				<option value="2">鎵嬫満</option>
																				<option value="3">PC+鎵嬫満</option>
																			</select> 
																		</div>
																		<div class="layui-inline valid-info"></div>
																	</div>
																	<div class="layui-form-item col-lg-6">
																		<label class="layui-form-label">鏄惁鍙敤*</label>
																		<div class="layui-inline col-lg-5">  
																			<select name="active" id="active" datatype="*" nullmsg="涓嶈兘涓虹┖" errormsg="涓嶈兘涓虹┖锛�">
																				<option value>鏄惁鍙敤</option>
																				<option value="1">鍙敤</option>
																				<option value="0">涓嶅彲鐢�</option>
																			</select>
																		</div>
																		<div class="layui-inline valid-info"></div>
																	</div>
																	<#--
																	<div class="layui-form-item col-lg-6">
																		<label class="layui-form-label">瀵瑰簲妯℃澘</label>
																		<div class="layui-inline col-lg-5">  
																			<button type="button" onclick="add()" class="layui-btn layui-btn-normal"><i class="layui-icon">&#xe64c;</i>娣诲姞妯℃澘</button>
																		</div>
																		<div class="layui-inline valid-info"></div>
																	</div>
																	-->
																	<div class="layui-form-item col-lg-8">
															    		<label class="layui-form-label"></label>
																		   <div class="layui-inline col-lg-8">  
																				 <table class="layui-table nospec <#if (returnDatas.data??) &&(returnDatas.data.managerOrgs??) &&(returnDatas.data.managerOrgs?size gt 0)><#else>off</#if>">
																					 	<colgroup>
																				    		<col width="">
																					    	<col width="160">
																					    	<col width="160">
																					    	<col width="80">
																				  		</colgroup>
																				  		<thead>
																							<tr>
																								<th>鍚嶇О</th>
																								<th>FTL璺緞</th>
																								<th>閾炬帴绫诲瀷</th>
																								<th>妯℃澘绫诲瀷</th>
																								<th>鎿嶄綔</th>
																							</tr>
																						</thead>
																						<tbody id="addTbody">
																							<#if (returnDatas.data??) &&(returnDatas.data.managerOrgs??) &&(returnDatas.data.managerOrgs?size gt 0)>
																								<#list returnDatas.data.managerOrgs as _data>
																									<tr>
																										<td><input type='text' readonly onclick='showMangerZtreeOrg(this)'   name='managerOrgNames' placeholder='鍗曞嚮閫夋嫨' class='layui-input' value="${(_data.orgName)!''}"><input type='hidden' name='managerOrgIds' value="${(_data.orgId)!''}"></td>
																										<td>
																											<select name='managerType'>
																												<option value='10' <#if _data.managerType?c=='10'>selected</#if>>鍛樺伐</option>
																												<option value='11' <#if _data.managerType?c=='11'>selected</#if>>涓荤</option>
																												<option value='12' <#if _data.managerType?c=='12'>selected</#if>>浠ｇ悊涓荤</option>
																												<option value='13' <#if _data.managerType?c=='13'>selected</#if>>铏氭嫙涓荤</option>
																											</select>
																										</td>
																										<td>
																											<select name='hasleaf'  lay-filter="hasleaf">
																												<option value='0' <#if _data.hasleaf?c=='0'>selected</#if>>涓嶅寘鍚�</option>
																												<option value='1' <#if _data.hasleaf?c=='1'>selected</#if>>鍖呭惈</option>
																											</select>
																										</td>
																										<td><a onclick='del(this)' class='layui-btn layui-btn-danger layui-btn-mini ajax-delete'>鍒犻櫎</a></td>
																									</tr>
																								</#list>
																							</#if>
																						</tbody>
																					</table>
																			</div>
																	     <div class="layui-inline valid-info"></div>
																  	</div>
													<div class="layui-form-item change-submit">
													<label class="layui-form-label"></label>
															<div class="layui-inline">
																<button type="button" class="layui-btn" id="smtbtn">淇濆瓨</button>
																<button type="button" class="layui-btn layui-btn-primary" id="rstbtn">閲嶇疆</button>
															</div>
														</div>
													</form>
												</div>
								  </div>
							</div>
					</div>
			</div>
		</div>
		<!-- 涓讳綋鍐呭缁撴潫 -->
		<@h.footer />
	</div>
</body>
</html>
